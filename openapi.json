{"openapi":"3.1.0","info":{"title":"Audio Transcription & Diarization API","description":"API para transcribir audio e identificar hablantes","version":"1.0.0"},"paths":{"/status/{job_id}":{"get":{"tags":["Jobs"],"summary":"Job Status","operationId":"job_status_status__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"tags":["General"],"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api":{"get":{"tags":["General"],"summary":"Api Info","operationId":"api_info_api_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["General"],"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/debug":{"get":{"tags":["General"],"summary":"Debug Info","operationId":"debug_info_debug_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/presign":{"post":{"tags":["Uploads"],"summary":"Presign Upload","description":"Genera una URL presigned para subir a DigitalOcean Spaces (S3 compatible).\n\nRequiere las variables de entorno: SPACES_KEY, SPACES_SECRET, SPACES_REGION, SPACES_BUCKET\nSi no existen, devuelve un error con instrucciones.","operationId":"presign_upload_presign_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_presign_upload_presign_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PresignResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/jobs/create":{"post":{"tags":["Jobs"],"summary":"Create Job From Url","description":"Crear un job a partir de una URL accesible públicamente (ej: Spaces pre-signed object URL).\n\nEl worker en segundo plano detectará el job y lo procesará.","operationId":"create_job_from_url_jobs_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/transcribe":{"post":{"tags":["Transcription"],"summary":"Transcribe Audio","operationId":"transcribe_audio_transcribe_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_transcribe_audio_transcribe_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/transcribe-diarize":{"post":{"tags":["Transcription"],"summary":"Transcribe With Diarization","description":"Transcribe audio e identifica hablantes.\n\nArgs:\n    file: Archivo de audio\n    language: Código de idioma\n    num_speakers: Número exacto de hablantes (opcional)\n    min_speakers: Número mínimo de hablantes (opcional)\n    max_speakers: Número máximo de hablantes (opcional)\n    output_format: Formato de salida ('text', 'detailed', 'srt')\n\nReturns:\n    Transcripción con identificación de hablantes","operationId":"transcribe_with_diarization_transcribe_diarize_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_transcribe_with_diarization_transcribe_diarize_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/convert-video":{"post":{"tags":["Video"],"summary":"Convert Video To Audio","description":"Convierte un archivo de video a MP3 (solo audio).\n\nArgs:\n    file: Archivo de video (mp4, avi, mov, mkv, etc.)\n    bitrate: Bitrate del audio (ej: \"128k\", \"192k\", \"320k\")\n    sample_rate: Frecuencia de muestreo (44100, 48000)\n\nReturns:\n    Archivo MP3 con el audio extraído","operationId":"convert_video_to_audio_convert_video_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_convert_video_to_audio_convert_video_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/convert-and-transcribe":{"post":{"tags":["Video"],"summary":"Convert Video And Transcribe","description":"Convierte un video a audio y lo transcribe con diarización en un solo paso.\n\nArgs:\n    file: Archivo de video\n    language: Código de idioma\n    num_speakers: Número exacto de hablantes (opcional)\n    min_speakers: Número mínimo de hablantes (opcional)\n    max_speakers: Número máximo de hablantes (opcional)\n    output_format: Formato de salida ('text', 'detailed', 'srt')\n    bitrate: Bitrate del audio\n\nReturns:\n    Transcripción con identificación de hablantes","operationId":"convert_video_and_transcribe_convert_and_transcribe_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_convert_video_and_transcribe_convert_and_transcribe_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/models":{"get":{"tags":["General"],"summary":"Get Models Info","description":"Información sobre los modelos disponibles","operationId":"get_models_info_models_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/debug/create_test_job":{"post":{"tags":["General"],"summary":"Create Test Job","description":"Crear un job de prueba que avanza automáticamente para testear el polling UI.\n\nArgs:\n    duration_seconds: Tiempo total que tomará el job (aprox.)\nReturns:\n    job_id","operationId":"create_test_job_debug_create_test_job_post","parameters":[{"name":"duration_seconds","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Duration Seconds"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_convert_video_and_transcribe_convert_and_transcribe_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"num_speakers":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Num Speakers"},"min_speakers":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Speakers"},"max_speakers":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Speakers"},"output_format":{"type":"string","title":"Output Format","default":"text"},"bitrate":{"type":"string","title":"Bitrate","default":"192k"}},"type":"object","required":["file"],"title":"Body_convert_video_and_transcribe_convert_and_transcribe_post"},"Body_convert_video_to_audio_convert_video_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"bitrate":{"type":"string","title":"Bitrate","default":"192k"},"sample_rate":{"type":"integer","title":"Sample Rate","default":44100}},"type":"object","required":["file"],"title":"Body_convert_video_to_audio_convert_video_post"},"Body_presign_upload_presign_post":{"properties":{"filename":{"type":"string","title":"Filename"}},"type":"object","required":["filename"],"title":"Body_presign_upload_presign_post"},"Body_transcribe_audio_transcribe_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"task":{"type":"string","title":"Task","default":"transcribe"},"output_format":{"type":"string","title":"Output Format","default":"text"},"download_format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Download Format"},"async_process":{"type":"boolean","title":"Async Process","default":false}},"type":"object","required":["file"],"title":"Body_transcribe_audio_transcribe_post"},"Body_transcribe_with_diarization_transcribe_diarize_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"num_speakers":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Num Speakers"},"min_speakers":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Speakers"},"max_speakers":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Speakers"},"output_format":{"type":"string","title":"Output Format","default":"text"},"download_format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Download Format"}},"type":"object","required":["file"],"title":"Body_transcribe_with_diarization_transcribe_diarize_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","title":"Timestamp"},"whisper_model":{"type":"string","title":"Whisper Model"},"device":{"type":"string","title":"Device"}},"type":"object","required":["status","timestamp","whisper_model","device"],"title":"HealthResponse"},"JobCreate":{"properties":{"source_url":{"type":"string","title":"Source Url"},"task":{"type":"string","title":"Task","default":"transcribe-diarize"},"whisper_model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whisper Model"},"num_speakers":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Num Speakers"}},"type":"object","required":["source_url"],"title":"JobCreate"},"PresignResponse":{"properties":{"upload_url":{"type":"string","title":"Upload Url"},"object_url":{"type":"string","title":"Object Url"}},"type":"object","required":["upload_url","object_url"],"title":"PresignResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}